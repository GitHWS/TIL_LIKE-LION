<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // class를 위한 개념, 스코프

    // 1. 전역, 2. 함수 스코프 3. 블록 스코프
    // 스코프 : 변수의 생존 범위

    var func1 = function () {
      var a = 1;
      var b = 2;
      console.log(a + b);
      // var는 함수 스코프이기 때문에 func1의 스코프 내의 var a,b 변수를 지역변수로 인식하기 때문에 연산
      // return 시 함수가 사라짐(내부의 선언된 변수를 삭제, 함수 종료 = 즉, 호출이 될 때마다 메모리를 새로 차지하고 함수가 종료 시 메모리 상에서 사라지기 때문)
      // 함수는 호출되기 전까지 자바스크립트는 함수 내부의 정보를 모름
      // * 가비지컬렉터(사용자 제어 불가)
    }
    var a = 20;
    func1();


    // 만약 함수안에 a가 없다면? 없는 a를 전역에서 찾음(이것은 스코프 체인이라고 함)

    var func2 = function () {
      var b = 2;
      console.log(a + b); // var는 함수 스코프이기 때문에 func1의 스코프 내의 var a,b 변수를 지역변수로 인식하기 때문에 연산
    }
    var a = 20;
    func2();


    // 내부 함수의 스코프 접근
    var func = function () {
      var a = 1;
      var b = 2;

      var func3 = function () {
        // a가 func3 함수 스코프 내에 없기 때문에 스코프 체인을 통해 상위 스코프에서 검색해서 찾음
        // 내부 함수는 외부(상위) 함수로 어디서든 접근이 가능하나 외부(상위) 함수에서 내부 함수로는 접근이 불가하다.
        var b = 5;
        var c = 6;
        a = a + b + c;
        console.log(a); // 1+5+6 = 12 
      }
      func3();
    }

    func();

    // 함수내부의 선언된 var 변수는 함수 스코프로 인해 전역 스코프에서 접근할 경우 레퍼런스 에러 발생 

    function test() {
      var val1 = "hello";
      var val2 = "world";
    }

    test();

    // console.log(val1); 
    // console.log(val2);

    function test1() {
      val3 = "hello";
      var val4 = "world";
    }

    test1()

    console.log(val3) // 함수 내 변수 키워드없이 선언된 변수는 전역변수가 됨
  </script>
</body>

</html>